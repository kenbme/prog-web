<header>
  <h1>Mercado Online</h1>
  <nav>
    <ul>
      <li><%= link_to "InÃ­cio", :root %></li>
      <li><%= link_to "Produtos", :produtos %></li>
      <li><%= link_to "Carrinho", :carrinho %></li>
      <li><%= link_to "Minha Conta", :minha_conta %></li>
      <li><%= link_to "Contato", :contato %></li>
    </ul>
  </nav>

  <% if current_page?(:root) %>
    <button id="change-theme">Trocar tema</button>
    <%= button_to "Login como Cliente", :login_cliente, method: :post %>
    <%= button_to "Login como Admin", :login_admin, method: :post %>
    <%= button_to "Logout", :logout, method: :post %>
  <% end %>
</header>

<script>
  const html = document.documentElement

  const theme = localStorage.getItem("data-theme")
  if(theme) {
    html.setAttribute("data-theme", theme)
  }

  const button = document.getElementById("change-theme")
  if (button) {
    button.addEventListener("click", () => {
      const theme = html.getAttribute("data-theme")
      if (theme == "dark") {
        html.setAttribute("data-theme", "light")
        localStorage.setItem("data-theme", "light")
      } else {
        html.setAttribute("data-theme", "dark")
        localStorage.setItem("data-theme", "dark")
      }
    })
  }
</script>
